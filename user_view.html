<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameStore Inventory - User View</title>
    <style>
        :root {
            --primary-blue: #0077cc;
            --secondary-orange: #ff6600;
            --dark-bg: #121212;
            --light-text: #f0f0f0;
            --card-bg: rgba(30, 30, 40, 0.8);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: var(--light-text);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), 
                              url('/api/placeholder/1200/800');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        header {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--secondary-orange);
        }
        
        .logo {
            color: var(--secondary-orange);
            font-size: 1.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .user-controls {
            display: flex;
            align-items: center;
        }
        
        .user-info {
            margin-right: 20px;
            color: var(--light-text);
        }
        
        .logout-btn {
            background-color: var(--secondary-orange);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background-color: #ff8533;
            box-shadow: 0 0 10px rgba(255, 102, 0, 0.5);
        }
        
        main {
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: var(--secondary-orange);
            margin-bottom: 20px;
            text-align: center;
            font-size: 2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .filter-controls {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            border: 1px solid var(--primary-blue);
        }
        
        .filter-controls select,
        .filter-controls input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #444;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--light-text);
        }
        
        .filter-controls label {
            margin-right: 10px;
        }
        
        .filter-item {
            display: flex;
            align-items: center;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .product-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #333;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 119, 204, 0.3);
        }
        
        .product-img {
            height: 180px;
            width: 100%;
            background-color: #1d1d1d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--secondary-orange);
        }
        
        .product-details {
            padding: 20px;
        }
        
        .product-name {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: white;
        }
        
        .product-category {
            display: inline-block;
            background-color: var(--primary-blue);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-bottom: 15px;
        }
        
        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--secondary-orange);
            margin-bottom: 15px;
        }
        
        .stock-status {
            padding: 8px 12px;
            border-radius: 5px;
            display: inline-block;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .in-stock {
            background-color: rgba(0, 160, 70, 0.3);
            color: #00e676;
            border: 1px solid #00a047;
        }
        
        .out-of-stock {
            background-color: rgba(200, 0, 0, 0.3);
            color: #ff6b6b;
            border: 1px solid #c80000;
        }
        
        .quantity-info {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            background-color: var(--card-bg);
            border-radius: 10px;
            border: 1px dashed #444;
        }
        
        @media (max-width: 768px) {
            .filter-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .filter-controls select,
            .filter-controls input {
                width: 100%;
                margin-top: 5px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">GameStore</div>
        <div class="user-controls">
            <div class="user-info" id="userInfo">Welcome, User</div>
            <button class="logout-btn" id="logoutBtn">Logout</button>
        </div>
    </header>
    
    <main>
        <h1>Game Inventory</h1>
        
        <div class="filter-controls">
            <div class="filter-item">
                <label for="categoryFilter">Category:</label>
                <select id="categoryFilter">
                    <option value="all">All Categories</option>
                    <option value="Console">Consoles</option>
                    <option value="Game">Games</option>
                    <option value="Accessory">Accessories</option>
                    <option value="Furniture">Furniture</option>
                    <option value="Computer">Computers</option>
                </select>
            </div>
            
            <div class="filter-item">
                <label for="stockFilter">Availability:</label>
                <select id="stockFilter">
                    <option value="all">All Items</option>
                    <option value="inStock">In Stock Only</option>
                    <option value="outOfStock">Out of Stock Only</option>
                </select>
            </div>
            
            <div class="filter-item">
                <label for="searchInput">Search:</label>
                <input type="text" id="searchInput" placeholder="Search products...">
            </div>
        </div>
        
        <div class="inventory-grid" id="inventoryGrid">
            <!-- Products will be dynamically added here -->
        </div>
    </main>
    
    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            
            // If no user is logged in or the user is an admin, redirect to login page
            if (!currentUser || currentUser.role === 'admin') {
                window.location.href = 'login.html';
                return;
            }
            
            // Update user info in header
            document.getElementById('userInfo').textContent = `Welcome, ${currentUser.username}`;
            
            // Get inventory data from localStorage
            const inventory = JSON.parse(localStorage.getItem('inventoryData'));
            
            // Display all products initially
            displayProducts(inventory);
            
            // Set up event listeners for filters
            document.getElementById('categoryFilter').addEventListener('change', filterProducts);
            document.getElementById('stockFilter').addEventListener('change', filterProducts);
            document.getElementById('searchInput').addEventListener('input', filterProducts);
            
            // Logout button handler
            document.getElementById('logoutBtn').addEventListener('click', function() {
                sessionStorage.removeItem('currentUser');
                window.location.href = 'login.html';
            });
        });
        
        function displayProducts(products) {
            const inventoryGrid = document.getElementById('inventoryGrid');
            inventoryGrid.innerHTML = '';
            
            if (products.length === 0) {
                inventoryGrid.innerHTML = '<div class="no-results">No products match your search criteria.</div>';
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // Get emoji based on category
                let categoryEmoji = '🎮';
                switch (product.category) {
                    case 'Console': categoryEmoji = '🎮'; break;
                    case 'Game': categoryEmoji = '💿'; break;
                    case 'Accessory': categoryEmoji = '🎧'; break;
                    case 'Furniture': categoryEmoji = '🪑'; break;
                    case 'Computer': categoryEmoji = '💻'; break;
                }
                
                productCard.innerHTML = `
                    <div class="product-img">${categoryEmoji}</div>
                    <div class="product-details">
                        <h3 class="product-name">${product.name}</h3>
                        <span class="product-category">${product.category}</span>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                        <div class="stock-status ${product.inStock ? 'in-stock' : 'out-of-stock'}">
                            ${product.inStock ? 'In Stock' : 'Out of Stock'}
                        </div>
                        ${product.inStock ? `<div class="quantity-info">Quantity available: ${product.quantity}</div>` : ''}
                    </div>
                `;
                
                inventoryGrid.appendChild(productCard);
            });
        }
        
        function filterProducts() {
            const categoryFilter = document.getElementById('categoryFilter').value;
            const stockFilter = document.getElementById('stockFilter').value;
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            
            // Get inventory data from localStorage
            const inventory = JSON.parse(localStorage.getItem('inventoryData'));
            
            // Apply filters
            const filteredProducts = inventory.filter(product => {
                // Category filter
                if (categoryFilter !== 'all' && product.category !== categoryFilter) {
                    return false;
                }
                
                // Stock filter
                if (stockFilter === 'inStock' && !product.inStock) {
                    return false;
                }
                if (stockFilter === 'outOfStock' && product.inStock) {
                    return false;
                }
                
                // Search filter
                if (searchInput && !product.name.toLowerCase().includes(searchInput) && 
                    !product.category.toLowerCase().includes(searchInput)) {
                    return false;
                }
                
                return true;
            });
            
            // Display filtered products
            displayProducts(filteredProducts);
        }
    </script>
</body>
</html>